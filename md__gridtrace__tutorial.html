<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>xmsgridtrace: Gridtrace_Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xmsgridtrace
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__gridtrace__tutorial.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Gridtrace_Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Gridtrace_Tutorial">Gridtrace Tutorial</a><ul><li class="level2"><a href="#Intro_Gridtrace">Introduction</a></li>
<li class="level2"><a href="#Example_Simple_Gridtrace">Example - Simple Gridtrace</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="Gridtrace_Tutorial"></a>
Gridtrace Tutorial</h1>
<h2><a class="anchor" id="Intro_Gridtrace"></a>
Introduction</h2>
<p>The purpose of this tutorial is to provide explanation on how to use the class defined in xmsgridtrace to trace a given point through a velocity vector field grid. The example provided in this tutorial refers to a test case that is in the <a class="el" href="_xm_grid_trace_8cpp.html">xmsgridtrace/gridtrace/XmGridTrace.cpp</a> source file.</p>
<h2><a class="anchor" id="Example_Simple_Gridtrace"></a>
Example - Simple Gridtrace</h2>
<p>This is the "hello world" example for using the gridtrace library.</p>
<p>This example shows how to trace a point through a simple grid. The testing code for this example is in <a class="el" href="class_xm_grid_trace_unit_tests.html#ae8fd15123c6f4f2b25b6d0a540e655e4">XmGridTraceUnitTests::testTutorial</a>. A picture of the example is shown below. Notice that the UGrid is 4 simple squares from (0,0) to (2,2) with each square having a side length of 1. The velocity vectors are mapped to the points.</p>
<div class="image">
<img src="xmsgridtrace_tutorial.png"  alt="Simple XmUGrid with 4 Cells and 9 Velocity Vectors x"/>
</div>
<p>The basic steps to trace a point through a velocity vector field are as follows:</p>
<ol type="1">
<li>Create the grid</li>
<li>Create the tracer from the grid</li>
<li>Set up the constraints on the tracer</li>
<li>Set up the velocity vectors for both time steps. Insert timesteps sequentially</li>
<li>Trace the point</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_xm_grid_trace_unit_tests.html#ae8fd15123c6f4f2b25b6d0a540e655e4">XmGridTraceUnitTests::testTutorial</a>()</div>
<div class="line">{</div>
<div class="line"><span class="comment">// Graph with scalar vectors indicated</span></div>
<div class="line"><span class="comment">//  -&gt;   -&gt;   </span></div>
<div class="line"><span class="comment">//  6----7----8|</span></div>
<div class="line"><span class="comment">//  |    |    |v</span></div>
<div class="line"><span class="comment">//  |    |    |</span></div>
<div class="line"><span class="comment">//  |    |    |</span></div>
<div class="line"><span class="comment">// ^|    |    |</span></div>
<div class="line"><span class="comment">// |3----4----5|</span></div>
<div class="line"><span class="comment">//  |    |    |v</span></div>
<div class="line"><span class="comment">//  |    |    |</span></div>
<div class="line"><span class="comment">//  |    |    |</span></div>
<div class="line"><span class="comment">// ^|    |    |</span></div>
<div class="line"><span class="comment">// |0----1----2</span></div>
<div class="line"><span class="comment">//      &lt;-   &lt;--</span></div>
<div class="line"><span class="comment">// Step 1: Create the grid</span></div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a0dc29604ee813731d584232b63f54922">VecPt3d</a> points = { { 0, 0, 0 },{ 1, 0, 0 },{ 2, 0, 0 },</div>
<div class="line">  { 0, 1, 0 },{ 1, 1, 0 },{ 2, 1, 0 },</div>
<div class="line">  { 0, 2, 0 },{ 1, 2, 0 },{ 2, 2, 0 } };</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#ad81e1ef6499bc0e65df973717a1e2fbb">VecInt</a> cells = { XMU_QUAD, 4, 0, 1, 4, 3,</div>
<div class="line">    XMU_QUAD, 4, 1, 2, 5, 4,</div>
<div class="line">    XMU_QUAD, 4, 3, 4, 7, 6,</div>
<div class="line">    XMU_QUAD, 4, 4, 5, 8, 7 };</div>
<div class="line">  BSHP&lt;XmUGrid&gt; ugrid = XmUGrid::New(points, cells);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Step 2: Create the tracer from the grid</span></div>
<div class="line">  BSHP&lt;XmGridTrace&gt; tracer = XmGridTrace::New(ugrid);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Step 3: Set up the constraints on the tracer</span></div>
<div class="line">  tracer-&gt;SetVectorMultiplier(2);</div>
<div class="line">  tracer-&gt;SetMaxTracingTime(-1);</div>
<div class="line">  tracer-&gt;SetMaxTracingDistance(-1);</div>
<div class="line">  tracer-&gt;SetMinDeltaTime(.01);</div>
<div class="line">  tracer-&gt;SetMaxChangeDistance(-1);</div>
<div class="line">  tracer-&gt;SetMaxChangeVelocity(-1);</div>
<div class="line">  tracer-&gt;SetMaxChangeDirectionInRadians(XM_PI/4);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Step 4: Set up the velocity vectors for both time steps. Insert timesteps sequentially</span></div>
<div class="line">  <span class="keywordtype">double</span> time = 0;</div>
<div class="line">  <span class="comment">// Scalars are set such that they circle around the edge of the graph in a clockwise direction</span></div>
<div class="line">  <span class="comment">// Z component is not used in scalars</span></div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a0dc29604ee813731d584232b63f54922">VecPt3d</a> scalars1 = { {  0,1,0 },{ -.1,0,0 },{ -1,0,0 },</div>
<div class="line">                        { 0,.1,0 },{ 0,0,0 },{ 0,-.1,0 },</div>
<div class="line">                        { 1,0,0 },{ .1,0,0 },{ 0,-1,0 } };</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#aba8c1eacfbbd2d1f45cef2fd55a35d93">DynBitset</a> pointActivity;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 9; ++i)</div>
<div class="line">  {</div>
<div class="line">    pointActivity.push_back(<span class="keyword">true</span>);</div>
<div class="line">  }</div>
<div class="line">  tracer-&gt;AddGridScalarsAtTime(scalars1, DataLocationEnum::LOC_POINTS, pointActivity, DataLocationEnum::LOC_POINTS, time);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// For the second timestep scalars are doubled to indicate an increase in magnitude</span></div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a0dc29604ee813731d584232b63f54922">VecPt3d</a> scalars2 = { { 0, 2, 0 }, { -.2, 0, 0 }, { -2, 0, 0 },</div>
<div class="line">  { 0, .2, 0 }, { 0, 0, 0 }, { 0, -.2, 0 },</div>
<div class="line">  { 2, 0, 0 }, { .2, 0, 0 }, { 0, -2, 0 } };</div>
<div class="line">  time = 20;</div>
<div class="line">  <span class="comment">//Uses exact same scalars/pointActivity</span></div>
<div class="line">  tracer-&gt;AddGridScalarsAtTime(scalars2, DataLocationEnum::LOC_POINTS, pointActivity, DataLocationEnum::LOC_POINTS, time);</div>
<div class="line"></div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a0dc29604ee813731d584232b63f54922">VecPt3d</a> outTrace;</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a5de59c68ff16d81cb2a429173f3a2fa5">VecDbl</a> outTimes;</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a33ae0c78e599c46ba59bce7f2b32d7ab">Pt3d</a> startPoint = { .5,.5,0 };</div>
<div class="line">  <span class="keywordtype">double</span> startTime = 0;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Step 5: Trace the point</span></div>
<div class="line">  tracer-&gt;TracePoint(startPoint, startTime, outTrace, outTimes);</div>
<div class="line">  <span class="comment">// show the cause for termination by calling GetExitMessage</span></div>
<div class="line">  std::cout &lt;&lt; tracer-&gt;GetExitMessage();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Expected values for this simulation</span></div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a0dc29604ee813731d584232b63f54922">VecPt3d</a> expectedOutTrace =</div>
<div class="line">  {</div>
<div class="line">    {0.50000000000000000, 0.50000000000000000, 0.00000000000000000 },</div>
<div class="line">    {0.50000000000000000, 1.2500000000000000, 0.00000000000000000 },</div>
<div class="line">    {0.54457812566426578, 1.3391562513285316, 0.00000000000000000 },</div>
<div class="line">    {0.61632493250262921, 1.4354984729093498, 0.00000000000000000 },</div>
<div class="line">    {0.72535406450374607, 1.5315533661126233, 0.00000000000000000 },</div>
<div class="line">    {0.88236797164001590, 1.6126801842666139, 0.00000000000000000 },</div>
<div class="line">    {0.98873181403598276, 1.6331015959080102, 0.00000000000000000 },</div>
<div class="line">    {1.0538503898747653, 1.6342606013582104, 0.00000000000000000 },</div>
<div class="line">    {1.1249433009705341, 1.5683006835455087, 0.00000000000000000 },</div>
<div class="line">    {1.1895097427498795, 1.3863448896225066, 0.00000000000000000 },</div>
<div class="line">    {1.2235242118635632, 1.0588590059131318, 0.00000000000000000 },</div>
<div class="line">    {1.2235242118635632, 0.90477286425654002, 0.00000000000000000 },</div>
<div class="line">    {1.2005336220528682, 0.85080764250970042, 0.00000000000000000 },</div>
<div class="line">    {1.1581790674742278, 0.79387770198395835, 0.00000000000000000 },</div>
<div class="line">    {1.0896874578697060, 0.74131697161132859, 0.00000000000000000 },</div>
<div class="line">    {0.98966250551038770, 0.70663752692174131, 0.00000000000000000 },</div>
<div class="line">    {0.95806149614159530, 0.71817980325332686, 0.00000000000000000 },</div>
<div class="line">    {0.92629620502521459, 0.77371504022050730, 0.00000000000000000 },</div>
<div class="line">    {0.90239412753251202, 0.88917318465162865, 0.00000000000000000 },</div>
<div class="line">    {0.89995172701803572, 1.0694875660697027, 0.00000000000000000 },</div>
<div class="line">    {0.91503139037776327, 1.0911992829869794, 0.00000000000000000 },</div>
<div class="line">    {0.93816744602651825, 1.1127546977629765, 0.00000000000000000 },</div>
<div class="line">    {0.97140028507849163, 1.1309789606067331, 0.00000000000000000 },</div>
<div class="line">    {0.99364912627842006, 1.1358370729524059, 0.00000000000000000 },</div>
<div class="line">    {1.0071524474802995, 1.1364684019706512, 0.00000000000000000 },</div>
<div class="line">    {1.0223447138862345, 1.1280655805979485, 0.00000000000000000 },</div>
<div class="line">    {1.0369737821057583, 1.0971462034407997, 0.00000000000000000 },</div>
<div class="line">    {1.0467397711865176, 1.0371377237101163, 0.00000000000000000 },</div>
<div class="line">    {1.0467397711865176, 0.96499504248441559, 0.00000000000000000 },</div>
<div class="line">    {1.0390576209755447, 0.95473758230148376, 0.00000000000000000 },</div>
<div class="line">    {1.0276444556154691, 0.94488898976070590, 0.00000000000000000 },</div>
<div class="line">    {1.0208791233912420, 0.94149540451099356, 0.00000000000000000 }</div>
<div class="line">  };</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/namespacexms.html#a5de59c68ff16d81cb2a429173f3a2fa5">VecDbl</a> expectedOutTimes =</div>
<div class="line">  {</div>
<div class="line">    0.00000000000000000,</div>
<div class="line">    0.37500000000000000,</div>
<div class="line">    0.82499999999999996,</div>
<div class="line">    1.3649999999999998,</div>
<div class="line">    2.0129999999999999,</div>
<div class="line">    2.7905999999999995,</div>
<div class="line">    3.2571599999999994,</div>
<div class="line">    3.5370959999999991,</div>
<div class="line">    3.8730191999999990,</div>
<div class="line">    4.2761270399999987,</div>
<div class="line">    4.7598564479999981,</div>
<div class="line">    5.3403317375999979,</div>
<div class="line">    6.0369020851199977,</div>
<div class="line">    6.8727865021439971,</div>
<div class="line">    7.8758478025727969,</div>
<div class="line">    9.0795213630873555,</div>
<div class="line">    9.4406234312417237,</div>
<div class="line">    9.8739459130269651,</div>
<div class="line">    10.393932891169255,</div>
<div class="line">    11.017917264940003,</div>
<div class="line">    11.766698513464901,</div>
<div class="line">    12.665236011694777,</div>
<div class="line">    13.743481009570628,</div>
<div class="line">    14.390428008296139,</div>
<div class="line">    14.778596207531445,</div>
<div class="line">    15.244398046613812,</div>
<div class="line">    15.803360253512654,</div>
<div class="line">    16.474114901791264,</div>
<div class="line">    17.279020479725595,</div>
<div class="line">    18.244907173246794,</div>
<div class="line">    19.403971205472232,</div>
<div class="line">    20.000000000000000</div>
<div class="line">  };</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/_test_tools_8h.html#ad074895a54cf874aed416e323758f355">TS_ASSERT_DELTA_VECPT3D</a>(expectedOutTrace, outTrace, .0001);</div>
<div class="line">  <a class="codeRef" doxygen="/home/travis/build/Aquaveo/xmsgridtrace/Doxygen/xmscore.tag:https://aquaveo.github.io/xmsextractor//" href="https://aquaveo.github.io/xmsextractor/_test_tools_8h.html#aa093335ed24e9478f11c0ab037a21597">TS_ASSERT_DELTA_VEC</a>(expectedOutTimes, outTimes, .0001);</div>
<div class="line">} <span class="comment">// XmGridTraceUnitTests::testTutorial</span></div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 29 2018 14:31:49 for xmsgridtrace by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
